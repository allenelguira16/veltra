"use strict";var o=require("@vinxi/server-functions/plugin"),s=require("path"),p=require("vinxi"),a=require("vite-plugin-vynn"),n=require("vite-tsconfig-paths"),v=require("node:fs"),c=require("vinxi/fs-router");class d extends c.BaseFileSystemRouter{toPath(r){if(!/page\.(t|j)sx?$/.test(s.basename(r)))return"";const e=c.cleanPath(r,this.config).replace(/\/page$/,"").replace(/\[([^/]+)\]/g,(u,t)=>t.startsWith("...")?`*${t.slice(3)}`:`:${t}`);return e?.length>0?`${e}`:"/"}toRoute(r){const e=this.toPath(r);if(!e)return null;const u=s.dirname(r),t=s.join(u,"layout.tsx");return{$$component:{src:r,pick:["default"]},...v.existsSync(t)?{$$layout:{src:t,pick:["default"]}}:{},path:e,filePath:r}}}function l({dir:i}){return(r,e)=>new d({dir:i,extensions:["tsx","ts","jsx","js"]},r,e)}function f({plugins:i,server:r={}}){const e=process.cwd();return p.createApp({devtools:!0,server:{compressPublicAssets:{brotli:!process.versions.bun},...r},routers:[{name:"public",type:"static",dir:s.resolve(e,"./public"),base:"/"},{name:"ssr",type:"http",base:"/",target:"server",handler:s.resolve(e,"./src/entry-server.tsx"),plugins:()=>[a({ssr:!0}),n(),...i],routes:l({dir:s.resolve(e,"./src/app")}),link:{client:"client"}},{name:"client",type:"client",base:"/_build",target:"browser",handler:s.resolve(e,"./src/entry-client.tsx"),plugins:()=>[o.serverFunctions.client(),a({ssr:!0}),n(),...i],routes:l({dir:s.resolve(e,"./src/app")})},o.serverFunctions.router({plugins:()=>[n()]})]})}exports.defineConfig=f;
//# sourceMappingURL=index.js.map
