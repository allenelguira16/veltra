"use strict";var v=require("vynn"),f=require("vynn/server/jsx-runtime");const p=typeof window>"u",c=v.store({pathname:p?"/":window.location.pathname,search:p?"":window.location.search});p||window.addEventListener("popstate",()=>{c.pathname=window.location.pathname,c.search=window.location.search});function j(t){p?c.pathname=t:(history.pushState(null,"",t),c.pathname=t,c.search=window.location.search)}function x(t,n=!0){const e=c.pathname.split("/").filter(Boolean),a=t.split("/").filter(Boolean);return n&&e.length!==a.length||!n&&e.length<a.length?!1:a.every((i,o)=>i.startsWith(":")||i===e[o])}function k(t,n,e=""){const a=(r,m)=>(r+"/"+m).replace(/\/+/g,"/"),i=t.split("/").filter(Boolean);for(const r of n){const m=a(e,r.path),d=m.split("/").filter(Boolean),h={};let w=!0;for(let s=0;s<d.length;s++){const u=d[s],g=i[s];if(u?.startsWith("*")){const y=u.slice(1)||"wildcard";return h[y]=i.slice(s).join("/"),{chain:[r],params:h}}if(u?.startsWith(":")){if(!g){w=!1;break}h[u.slice(1)]=g}else if(u!==g){w=!1;break}}if(w){if(r.children){const s=k(t,r.children,m);if(s)return{chain:[r,...s.chain],params:{...h,...s.params}}}if(d.length===i.length)return{chain:[r],params:h}}}const o=n.find(r=>r.path.startsWith("*"));if(o){const r=o.path.slice(1)||"wildcard";return{chain:[o],params:{[r]:i.join("/")}}}}const l=v.store({});function R({url:t,routes:n}){return t&&(c.pathname=t),()=>{const e=k(c.pathname,n);if(e){const{chain:a,params:i}=e;for(const o in l)delete l[o];return Object.assign(l,i),C(a)}for(const a in l)delete l[a];return f.jsx(f.Fragment,{})}}const[B,W]=v.createContext();function b(){return W()()}function C(t){let n=()=>null;for(let e=t.length-1;e>=0;e--){const a=t[e];if(!a.component)continue;const i=a.component,o=n;n=()=>f.jsx(B,{value:()=>o,children:()=>f.jsx(i,{})})}return n()}function L({children:t,href:n,activeClass:e,class:a}){return f.jsx("a",{href:()=>n,class:()=>(a+(x(n)?` ${e}`:"")).trim(),onClick:()=>i=>{p||(i.preventDefault(),j(n))},children:()=>t()})}exports.Link=L,exports.Outlet=b,exports.Router=R,exports.isActiveRoute=x,exports.location=c,exports.navigate=j,exports.params=l;
//# sourceMappingURL=index.js.map
