"use strict";var v=require("vynn"),f=require("vynn/server/jsx-runtime");const p=typeof window>"u",r=v.store({pathname:p?"/":window.location.pathname,search:p?"":window.location.search});p||window.addEventListener("popstate",()=>{r.pathname=window.location.pathname,r.search=window.location.search});function x(t){t!==r.pathname&&(p?r.pathname=t:(history.pushState(null,"",t),r.pathname=t,r.search=window.location.search))}function j(t,n=!0){const a=r.pathname.split("/").filter(Boolean),e=t.split("/").filter(Boolean);return n&&a.length!==e.length||!n&&a.length<e.length?!1:e.every((i,s)=>i.startsWith(":")||i===a[s])}function k(t,n,a=""){const e=(o,m)=>(o+"/"+m).replace(/\/+/g,"/"),i=t.split("/").filter(Boolean);for(const o of n){const m=e(a,o.path),d=m.split("/").filter(Boolean),h={};let w=!0;for(let c=0;c<d.length;c++){const u=d[c],g=i[c];if(u?.startsWith("*")){const y=u.slice(1)||"wildcard";return h[y]=i.slice(c).join("/"),{chain:[o],params:h}}if(u?.startsWith(":")){if(!g){w=!1;break}h[u.slice(1)]=g}else if(u!==g){w=!1;break}}if(w){if(o.children){const c=k(t,o.children,m);if(c)return{chain:[o,...c.chain],params:{...h,...c.params}}}if(d.length===i.length)return{chain:[o],params:h}}}const s=n.find(o=>o.path.startsWith("*"));if(s){const o=s.path.slice(1)||"wildcard";return{chain:[s],params:{[o]:i.join("/")}}}}const l=v.store({});function R({url:t,routes:n}){return t&&(r.pathname=t),()=>{const a=k(r.pathname,n);if(a){const{chain:e,params:i}=a;for(const s in l)delete l[s];return Object.assign(l,i),C(e)}for(const e in l)delete l[e];return f.jsx(f.Fragment,{})}}const[B,W]=v.createContext();function b(){return W()()}function C(t){let n=()=>null;for(let a=t.length-1;a>=0;a--){const e=t[a];if(!e.component)continue;const i=e.component,s=n;n=()=>f.jsx(B,{value:()=>s,children:()=>f.jsx(i,{})})}return n()}function L({children:t,href:n,activeClass:a,class:e}){return e??(e=""),f.jsx("a",{href:()=>n,class:()=>(e+(j(n)?` ${a}`:"")).trim(),onClick:()=>i=>{p||(i.preventDefault(),i.stopPropagation(),j(n)||x(n))},children:()=>t()})}exports.Link=L,exports.Outlet=b,exports.Router=R,exports.isActiveRoute=j,exports.location=r,exports.navigate=x,exports.params=l;
//# sourceMappingURL=index.js.map
