import{store as j,createContext as B}from"vynn";import{jsx as m,Fragment as W}from"vynn/server/jsx-runtime";const p=typeof window>"u",r=j({pathname:p?"/":window.location.pathname,search:p?"":window.location.search});p||window.addEventListener("popstate",()=>{r.pathname=window.location.pathname,r.search=window.location.search});function k(t){t!==r.pathname&&(p?r.pathname=t:(history.pushState(null,"",t),r.pathname=t,r.search=window.location.search))}function v(t,n=!0){const a=r.pathname.split("/").filter(Boolean),e=t.split("/").filter(Boolean);return n&&a.length!==e.length||!n&&a.length<e.length?!1:e.every((o,s)=>o.startsWith(":")||o===a[s])}function x(t,n,a=""){const e=(i,u)=>(i+"/"+u).replace(/\/+/g,"/"),o=t.split("/").filter(Boolean);for(const i of n){const u=e(a,i.path),d=u.split("/").filter(Boolean),h={};let w=!0;for(let c=0;c<d.length;c++){const f=d[c],g=o[c];if(f?.startsWith("*")){const y=f.slice(1)||"wildcard";return h[y]=o.slice(c).join("/"),{chain:[i],params:h}}if(f?.startsWith(":")){if(!g){w=!1;break}h[f.slice(1)]=g}else if(f!==g){w=!1;break}}if(w){if(i.children){const c=x(t,i.children,u);if(c)return{chain:[i,...c.chain],params:{...h,...c.params}}}if(d.length===o.length)return{chain:[i],params:h}}}const s=n.find(i=>i.path.startsWith("*"));if(s){const i=s.path.slice(1)||"wildcard";return{chain:[s],params:{[i]:o.join("/")}}}}const l=j({});function b({url:t,routes:n}){return t&&(r.pathname=t),()=>{const a=x(r.pathname,n);if(a){const{chain:e,params:o}=a;for(const s in l)delete l[s];return Object.assign(l,o),R(e)}for(const e in l)delete l[e];return m(W,{})}}const[C,L]=B();function O(){return L()()}function R(t){let n=()=>null;for(let a=t.length-1;a>=0;a--){const e=t[a];if(!e.component)continue;const o=e.component,s=n;n=()=>m(C,{value:()=>s,children:()=>m(o,{})})}return n()}function A({children:t,href:n,activeClass:a,class:e}){return e??(e=""),m("a",{href:()=>n,class:()=>(e+(v(n)?` ${a}`:"")).trim(),onClick:()=>o=>{p||(o.preventDefault(),o.stopPropagation(),v(n)||k(n))},children:()=>t()})}export{A as Link,O as Outlet,b as Router,v as isActiveRoute,r as location,k as navigate,l as params};
//# sourceMappingURL=index.js.map
