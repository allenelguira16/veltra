import{store as v,createContext as B}from"vynn";import{jsx as m,Fragment as W}from"vynn/server/jsx-runtime";const p=typeof window>"u",c=v({pathname:p?"/":window.location.pathname,search:p?"":window.location.search});p||window.addEventListener("popstate",()=>{c.pathname=window.location.pathname,c.search=window.location.search});function j(t){p?c.pathname=t:(history.pushState(null,"",t),c.pathname=t,c.search=window.location.search)}function k(t,n=!0){const e=c.pathname.split("/").filter(Boolean),a=t.split("/").filter(Boolean);return n&&e.length!==a.length||!n&&e.length<a.length?!1:a.every((o,i)=>o.startsWith(":")||o===e[i])}function x(t,n,e=""){const a=(r,u)=>(r+"/"+u).replace(/\/+/g,"/"),o=t.split("/").filter(Boolean);for(const r of n){const u=a(e,r.path),d=u.split("/").filter(Boolean),h={};let w=!0;for(let s=0;s<d.length;s++){const f=d[s],g=o[s];if(f?.startsWith("*")){const y=f.slice(1)||"wildcard";return h[y]=o.slice(s).join("/"),{chain:[r],params:h}}if(f?.startsWith(":")){if(!g){w=!1;break}h[f.slice(1)]=g}else if(f!==g){w=!1;break}}if(w){if(r.children){const s=x(t,r.children,u);if(s)return{chain:[r,...s.chain],params:{...h,...s.params}}}if(d.length===o.length)return{chain:[r],params:h}}}const i=n.find(r=>r.path.startsWith("*"));if(i){const r=i.path.slice(1)||"wildcard";return{chain:[i],params:{[r]:o.join("/")}}}}const l=v({});function b({url:t,routes:n}){return t&&(c.pathname=t),()=>{const e=x(c.pathname,n);if(e){const{chain:a,params:o}=e;for(const i in l)delete l[i];return Object.assign(l,o),R(a)}for(const a in l)delete l[a];return m(W,{})}}const[C,L]=B();function O(){return L()()}function R(t){let n=()=>null;for(let e=t.length-1;e>=0;e--){const a=t[e];if(!a.component)continue;const o=a.component,i=n;n=()=>m(C,{value:()=>i,children:()=>m(o,{})})}return n()}function A({children:t,href:n,activeClass:e,class:a}){return m("a",{href:()=>n,class:()=>(a+(k(n)?` ${e}`:"")).trim(),onClick:()=>o=>{p||(o.preventDefault(),j(n))},children:()=>t()})}export{A as Link,O as Outlet,b as Router,k as isActiveRoute,c as location,j as navigate,l as params};
//# sourceMappingURL=index.js.map
